"use strict";var goodCar=getid("goodCar"),data=goodCar.getElementsByClassName("data")[0],id=decodeURI(location.search).slice(1),userid=getCookie("name");function shopitem(e){var n=e[0].shuju.split("&"),a=[],t=[],o=!0,s=!1,i=void 0;try{for(var l,r=n[Symbol.iterator]();!(o=(l=r.next()).done);o=!0){for(var c=l.value,d="",u=0;u<c.length;u++)0<u&&u<c.length-1&&(d+=c[u]);a.push(d.split(","))}}catch(e){s=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(s)throw i}}var h=!0,g=!1,m=void 0;try{for(var p,f=a[Symbol.iterator]();!(h=(p=f.next()).done);h=!0){var v=p.value;t.push(Number(v[0]))}}catch(e){g=!0,m=e}finally{try{!h&&f.return&&f.return()}finally{if(g)throw m}}console.log(t),ajax({type:"get",url:"../api/shopsearch.php",data:{idarr:t},success:function(e){creat(e)}})}function creat(e){var n=JSON.parse(e).map(function(e){return'<div class="list" date-id="'+e[0].id+'">\n                      <div class="con">\n                          <div class="tex">\n                              <input type="checkbox"class=\'danxuan\'>\n                              <div class="img-box"> <img src="'+e[0].bigpics+'""></div>\n    \n                              <h2>'+e[0].titlte+"</h2>\n                              <h3>\n                                  <p>颜色分类:</p>\n                                  <p>尺码：</p>\n                              </h3>\n                              <h4>￥"+e[0].price1+"</h4>\n                              <span>\n                                  <p class='cutbtn'>-</p>\n                                  <input type=\"text\" value='1' data-kucun='"+e[0].kucun+"' class='good-num'>\n                                  <p class='addbtn'>+</p>\n                              </span>\n                              <p class='xiangou'>(限购"+e[0].kucun+"件)</p>\n                              <h5>"+e[0].price1+"</h5>\n                              <h6><a href=\"\" class='del'>删除</a></h6>\n                          </div>\n    \n                      </div>\n                    </div> "}).join("");data.innerHTML=n;var s=goodCar.getElementsByClassName("quanxuan1")[0],i=goodCar.getElementsByClassName("quanxuan2")[0],l=data.getElementsByClassName("cutbtn"),r=data.getElementsByClassName("addbtn"),c=data.getElementsByClassName("del"),d=data.getElementsByClassName("danxuan"),u=data.getElementsByClassName("list"),h=data.getElementsByClassName("good-num"),t=data.getElementsByTagName("h4"),g=data.getElementsByTagName("h5"),m=goodCar.getElementsByClassName("allNum")[0],a=goodCar.getElementsByClassName("bottom")[0],p=a.getElementsByClassName("p1")[0],f=a.getElementsByClassName("allPrice")[0],v=a.getElementsByClassName("p4")[0];function y(e,n){var a=h[n].dataset.kucun;e<1?e=1:a<e&&(e=a),h[n].value=e,g[n].innerHTML=(e*t[n].innerHTML.slice(1)).toFixed(2)}for(var o=function(e){function n(){for(var e=[],n=0;n<d.length;n++)d[n].checked&&e.push(1);return e.length}r[e].index=e,l[e].index=e,d[e].index=e,h[e].index=e,c[e].index=e,u[e].index=e,r[e].onclick=function(){console.log(this);var e=h[this.index].value;y(++e,this.index),t()},l[e].onclick=function(){var e=h[this.index].value;y(--e,this.index),t()},h[e].oninput=function(){y(this.value,this.index),t()},c[e].onclick=function(){confirm("您真的要删除该行吗？")&&data.removeChild(this.parentNode.parentNode)},d[e].onclick=function(){for(var e=0;e<d.length;e++)t(),o()},s.onclick=function(){for(var e=0;e<d.length;e++)i.checked=d[e].checked=s.checked,t(),o()},i.onclick=function(){for(var e=0;e<d.length;e++)s.checked=d[e].checked=i.checked,t(),o()},n();for(var a=0;a<d.length;a++)d[a].onclick=function(){var e;e=n(),(m.innerHTML=e)==d.length?s.checked=i.checked=!0:s.checked=i.checked=!1,o(),t()};function t(){for(var e=0,n=0;n<d.length;n++)if(d[n].checked){var a=Number(g[n].innerHTML);console.log(g[n].innerHTML),e+=a}f.innerHTML=e}function o(){for(var e=0;e<d.length;e++)d[e].checked?(v.style.backgroundColor="red",v.style.cursor="pointer",d[e].parentNode.parentNode.style.backgroundColor="#fff4e8"):(d[e].parentNode.parentNode.style.backgroundColor="",v.style.backgroundColor="",v.style.cursor="")}p.onclick=function(){confirm("您真的要全部删除吗？")&&goodCar.removeChild(this.parentNode.previousElementSibling)}},k=0;k<r.length;k++)o(k)}ajax({type:"get",url:"../api/shoplist.php",data:{name:userid},success:function(e){console.log(e),shopitem(JSON.parse(e))}});