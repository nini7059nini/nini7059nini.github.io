"use strict";!function(){var n=document.getElementsByClassName("categoryMenu")[0];ajax({type:"get",url:"../api/menu.php",success:function(t){!function(t){var e=JSON.parse(t).map(function(t){var e=t.list.split("&"),n="";for(var i in e)n+="<p>"+e[i]+"</p><span>></span>";return'   <li>\n                        <div class="categoryTpye">\n                            <h3>'+t.title+"</h3>\n                            <div>\n                                "+n+'\n                            </div>\n\n                        </div>\n                        <div class="categoryImg"><img src="'+t.img+'" alt=""></div>\n                    </li>'}).join("");n.innerHTML=e}(t)}});var i=document.getElementsByClassName("categoryImglist")[0];function t(){this.oBox=document.getElementsByClassName("categoryBox")[0],this.aInputs=this.oBox.getElementsByClassName("categoryBoxLi"),this.aDivs=this.oBox.getElementsByClassName("categoryBoxList")}console.log(i),ajax({type:"get",url:"../api/pinpai.php",success:function(t){var e=JSON.parse(t).map(function(t){return'<div><img src="'+t.img+'" alt=""></div>'}).join("");i.innerHTML=e}}),window.onload=function(){(new t).init()},t.prototype.init=function(){for(var e=this,t=function(){e.aInputs[n].index=n;var t=e;e.aInputs[n].onclick=function(){t.move(this)}},n=0;n<this.aInputs.length;n++)t()},t.prototype.move=function(t){for(var e=0;e<this.aInputs.length;e++)this.aDivs[e].style.display="none";this.aDivs[t.index].style.display="block"};var g=document.getElementById("pro_ul"),u=document.getElementById("pages"),m=1,d=4,e="";function v(){ajax({type:"get",url:"../api/getpage.php",data:{ipage:m,num:d,paixu:e},success:function(t){!function(t){var e=JSON.parse(t),n=e.list.map(function(t){var e=t.xiaotu.split(","),n="";for(var i in e)n+='  <img class="xiaotu" src="'+e[i]+'" alt="">';return' <li data-id="'+t.id+'"  id ="pro_li">\n                            <img src="'+t.bigpics+'" alt="" class="bigpic">\n                            <ol class=\'smpic\'>\n                              '+n+'\n                            </ol>\n                            <div class="val">\n                                <h2>¥'+t.price1+"</h2>\n                                <h3>¥"+t.price2+'</h3>\n                            </div>\n                            <div class="tex">\n                                <h5>'+t.titlte+"</h5>\n                            </div>\n    \n                        </li>"}).join("");g.innerHTML=n;for(var i=Math.ceil(e.total/d),a="",s=0;s<i;s++)a+='  <li class="mashu">'+(s+1)+"</li>";u.innerHTML=a,u.children[m-1].classList.add("mashu1"),u.onclick=function(t){"LI"==t.target.tagName&&(m=t.target.innerHTML,v())};g.getElementsByClassName("xiaotu");for(var l=g.getElementsByClassName("smpic"),o=0;o<l.length;o++)l[o].onmouseover=function(t){if("IMG"==t.target.tagName){var e=t.target.src;t.target.parentNode.previousElementSibling.src=e;for(var n=0;n<t.target.parentNode.children.length;n++)t.target.parentNode.children[n].className=""}t.target.className="smpic active"};for(var c=g.getElementsByClassName("bigpic"),r=0;r<c.length;r++)c[r].index=r,c[r].onclick=function(){var t=this.parentNode.dataset.id;p(t),window.open("details.html?"+t)};function p(t){var e=localStorage.goodlist;if(e){var n="",i=e.split("&"),a=i.indexOf(t);0<=a?(i.splice(a,1),i.push(t),n=i.join("&"),console.log(i)):n=e+"&"+t,localStorage.goodlist=n}else localStorage.goodlist=t}}(t)}})}v();var a=document.getElementById("asc"),s=document.getElementById("desc");a.onclick=function(){m=1,e="ASC",v()},s.onclick=function(){m=1,e="DESC",v()};var l=document.getElementById("leftUl");ajax({type:"get",url:"../api/list1.php",success:function(t){var e=JSON.parse(t);console.log(e);var n=e.map(function(t){return'  <ul class="left-ul">\n                            <li><img src="'+t.bigpics+'" alt=""></li>\n                            <li class="left-cons-txt">'+t.titlte+'</li>\n                            <li class="left-cons-val">¥'+t.price1+"</li>\n                        </ul> "}).join("");l.innerHTML=n}})}();