"use strict";!function(){var n=decodeURI(location.search).slice(1),m=document.getElementsByClassName("pt-data-c")[0];ajax({type:"get",url:"../api/details.php",data:{id:n},success:function(n){!function(n){var t=JSON.parse(n).map(function(n){return'    \x3c!-- 商品标题 --\x3e\n                        <div class="data-c-tit">\n                            <img src="../css/img/datalis-2.png" alt="">\n                            <h2>'+n.titlte+'</h2>\n                        </div>\n                        \x3c!-- 详情价格区 --\x3e\n                        <div class="data-pval">\n                            <ul>\n                                <li class="pval-ms">\n                                    <span>奥莱价:</span>\n                                    <em>¥'+n.price1+"</em>\n                                    <del>¥"+n.price2+'</del>\n                                </li>\n                            </ul>\n                        </div>\n                        \x3c!-- 选择区 --\x3e\n                        <ul class="skuAttrs">\n                            <li class="data-attr1">选择颜色：</li>\n                            <li class="data-attr2">\n                                <div class="ptattr attr-sec">黑色</div>\n                            </li>\n                        </ul>\n                        <ul class="skuAttrs">\n                            <li class="data-attr1">选择尺码：</li>\n                            <li class="data-attr2">\n                                <div class=" attr-sec">150/76A</div>\n                                <div class=" attr-sec">155/80A</div>\n                                <div class="attr-sec">155/90A</div>\n                            </li>\n                        </ul>\n                        \x3c!-- 数量确定区 --\x3e\n                        <div class="buy-container">\n                            <div class="data-number">\n                                <ul>\n                                    <li class="data-number5">\n                                        <div class="dtnum2">选择数量</div>\n                                        <div class="dtnum3">剩余\n                                            <em>'+n.kucun+'</em>\n                                            件&nbsp;&nbsp;\n                                        </div>\n\n                                    </li>\n                                    <li class="data-number2">\n                                        <div class="pt-nk">\n                                            <input type="text" class="datanub-value" value="1" data-kucun=\''+n.kucun+'\'>\n                                        </div>\n                                        <div class="pt-ns">\n                                            <p id=\'add\'>+</p>\n                                            <p id=\'cut\'>-</p>\n                                        </div>\n                                    </li>\n                                    <li class="data-number3">\n                                        <h2>加入购物车</h2>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="data-sao">\n                                <span class="phone">\n                                    <img src="http://skin.aolaigo.com//image/product/icon_phone.png" alt="">\n                                </span>\n                                <ul>\n                                    <li class="lids1">手机购买</li>\n                                    <li class="lids2">\n                                        <img src="http://skin.aolaigo.com//image/product/more_unfold.png" alt="">\n                                    </li>\n                                </ul>\n                                <div class="dstelma">\n                                    <img src="http://img3.aolaigo.com/group1/M00/2D/40/CggUF1m5NjiAYFEkAAAI7tB9bs8356.png"\n                                        alt="">\n                                </div>\n                            </div>\n                        </div>'}).join("");m.innerHTML=t;for(var a=document.getElementsByClassName("data-attr2")[1].getElementsByTagName("div"),e=0;e<a.length;e++)a[e].onclick=function(){for(var n=0;n<a.length;n++)a[n].className="attr-sec";this.className="attr-sec  active"},a[0].className="attr-sec  active";var i=document.getElementsByClassName("lids2")[0],s=document.getElementsByClassName("dstelma")[0];i.onmouseover=function(){s.style.display="block"},i.onmouseout=function(){s.style.display="none"};for(var l=document.getElementsByClassName("datanub-value")[0],c=document.getElementById("add"),o=document.getElementById("cut"),r=0;r<c.length;r++)c[u=r].index=u,o[u].index=u,l[u].index=u,c.onclick=function(){console.log(this);var n=l[this.index].value;d(++n,this.index)},o.onclick=function(){var n=l[this.index].value;d(--n,this.index)},l.oninput=function(){d(this.value,this.index)};function d(n,t){var a=l.dataset.kucun;n<1?n=1:a<n&&(n=a),l[t].value=n}var u}(n)}});var i=document.getElementsByClassName("categoryMenu")[0];ajax({type:"get",url:"../api/menu.php",success:function(n){!function(n){var t=JSON.parse(n).map(function(n){var t=n.list.split("&"),a="";for(var e in t)a+="<p class='menu-p'>"+t[e]+"</p><span>></span>";return'   <li>\n                        <div class="categoryTpye">\n                            <h3>'+n.title+"</h3>\n                            <div>\n                                "+a+'\n                            </div>\n\n                        </div>\n                        <div class="categoryImg"><img src="'+n.img+'" alt=""></div>\n                    </li>'}).join("");i.innerHTML=t;var a=i.getElementsByClassName("menu-p");console.log(a);for(var e=0;e<a.length;e++)a[e].onclick=function(){location.href="../html/list.html"}}(n)}});var a=document.getElementsByClassName("categoryImglist")[0];console.log(a),ajax({type:"get",url:"../api/pinpai.php",success:function(n){var t=JSON.parse(n).map(function(n){return'<div><img src="'+n.img+'" alt=""></div>'}).join("");a.innerHTML=t}});var E=document.getElementById("goods");ajax({type:"get",url:"../api/list.php",data:{id:n},success:function(n){!function(n){var t=JSON.parse(n),a=localStorage.goodlist.split("&").reverse(),e="",i=!0,s=!1,l=void 0;try{for(var c,o=a[Symbol.iterator]();!(i=(c=o.next()).done);i=!0){var r=c.value,d=!0,u=!1,m=void 0;try{for(var v,p=t[Symbol.iterator]();!(d=(v=p.next()).done);d=!0){var g=v.value;r==g.id&&(e+=' <li>\n                                    <div class="rt-val1">\n                                        <img src="'+g.bigpics+'" alt="">                        \n                                    </div>\n                                    <h2 data-id="'+g.id+'">'+g.titlte+'</h2>\n                                    <div class="rt-val3">\n                                        <span class="price">¥'+g.price1+"</span>\n                                </div>\n                                </li>")}}catch(n){u=!0,m=n}finally{try{!d&&p.return&&p.return()}finally{if(u)throw m}}}}catch(n){s=!0,l=n}finally{try{!i&&o.return&&o.return()}finally{if(s)throw l}}E.innerHTML=e;var f=document.getElementById("pt-data-r"),h=f.getElementsByClassName("data-rt-val")[0],y=f.getElementsByClassName("arrow-left")[0],x=f.getElementsByClassName("arrow-right")[0],B=1*(E.children[0].offsetHeight+4);function N(n){var t=E.offsetTop+n;t<=h.offsetHeight-E.offsetHeight+20?t=h.offsetHeight-E.offsetHeight+20:0<=t&&(t=0),E.style.top=t+"px"}y.onclick=function(){N(B)},x.onclick=function(){N(-B)}}(n)}});var e=document.getElementById("d-left-con");function t(){this.oBox=document.getElementsByClassName("categoryBox")[0],this.aInputs=this.oBox.getElementsByClassName("categoryBoxLi"),this.aDivs=this.oBox.getElementsByClassName("categoryBoxList")}ajax({type:"get",url:"../api/list1.php",success:function(n){!function(n){var t=JSON.parse(n).map(function(n){return' <ul>\n                    <li><img src="'+n.bigpics+'" alt=""></li>\n                    <li class="left-conli-txt">'+n.titlte+'</li>\n                    <li class="left-conli-val">'+n.price1+"</li>\n                </ul>"}).join("");e.innerHTML=t}(n)}}),window.onload=function(){(new t).init()},t.prototype.init=function(){for(var t=this,n=function(){t.aInputs[a].index=a;var n=t;t.aInputs[a].onclick=function(){n.move(this)}},a=0;a<this.aInputs.length;a++)n()},t.prototype.move=function(n){for(var t=0;t<this.aInputs.length;t++)this.aDivs[t].style.display="none";this.aDivs[n.index].style.display="block"}}();